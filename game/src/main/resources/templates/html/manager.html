<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>RANK GAME</title>
    <meta charset="UTF-8">
    <meta name="description" content="EndGam Gaming Magazine Template">
    <meta name="keywords" content="endGam,gGaming, magazine, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicon -->
    <link href="/img/favicon.ico" rel="shortcut icon"/>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,500i,700,700i,900,900i" rel="stylesheet">


    <!-- Stylesheets -->
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="/css/slicknav.min.css"/>
    <link rel="stylesheet" href="/css/owl.carousel.min.css"/>
    <link rel="stylesheet" href="/css/magnific-popup.css"/>
    <link rel="stylesheet" href="/css/animate.css"/>

    <!-- Main Stylesheets -->
    <link rel="stylesheet" href="/css/style.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!--[if lt IE 9]>
    <script src="/https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="/https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>
<body>
<!-- Page Preloder -->
<div id="preloder">
    <div class="loader"></div>
</div>

<!-- Header section -->
<header class="header-section">
    <div class="header-warp">
        <div class="header-social d-flex justify-content-end">
            <p>Follow us:</p>
            <a href="#"><i class="fa fa-pinterest"></i></a>
            <a href="#"><i class="fa fa-facebook"></i></a>
            <a href="#"><i class="fa fa-twitter"></i></a>
            <a href="#"><i class="fa fa-dribbble"></i></a>
            <a href="#"><i class="fa fa-behance"></i></a>
        </div>
        <div class="header-bar-warp d-flex">
            <!-- site logo -->
            <a href="/" class="site-logo">
                <img src="/img/logo.png" alt="Logo">
            </a>
            <nav class="top-nav-area w-100">
                <div class="user-panel">
                    <div class="auth" th:if="${isLogin}">
                        <a href="/profile/mainMyPage">마이페이지</a> /
                        <a href="/member/logout">로그아웃</a>
                        <span th:if="${isAdmin}"><a href="/member/members"></a></span>
                    </div>
                    <div class="auth" th:if="${!isLogin}">
                        <a href="#" id="login-btn">로그인</a> / <a href="/member/signup">회원가입</a>
                    </div>
                </div>

                <div class="modal-overlay" id="modal-overlay" th:if="${!isLogin}"></div>

                <div class="modal" id="login-modal" th:if="${!isLogin}">
                    <h2>로그인</h2>
                    <form action="/member/login" method="post">
                        <label for="login-email">이메일:</label>
                        <input type="email" id="login-email" name="memberEmail" required>
                        <label for="login-password">비밀번호:</label>
                        <input type="password" id="login-password" name="memberPassword" required>
                        <button type="submit">로그인</button>
                    </form>
                    <button id="close-login-modal">닫기</button>
                </div>
                <!-- Menu -->
                <ul class="main-menu primary-menu">
                    <li><a href="/">홈</a></li>
                    <li><a href="/search/lol">전적 검색</a>
                        <ul class="sub-menu">
                            <li><a href="/search/lol">리그오브레전드</a></li>
                            <li><a href="/search/pubg">배틀그라운드</a></li>
                            <li><a href="/search/cyphers">사이퍼즈</a></li>
                        </ul>
                    </li>
                    <li><a href="/review">투표 / 게임 랭킹</a>
                        <ul class="sub-menu">
                            <li><a href="/review">게임 랭킹</a>
                            <li><a href="/vote">투표</a></li>
                        </ul>
                    </li>
                    <li><a href="/board/boardlist">자유게시판</a></li>
                    <li><a href="/notice">공지사항</a></li>
                </ul>
            </nav>
        </div>
    </div>
</header>
<!-- Header section end -->

<!-- Page top section -->
<section class="page-top-section" style="background-image: url('/img/page-top-bg/1.jpg');">
    <div class="page-info">
        <h2>관리자</h2>
        <div class="site-breadcrumb">
            <a href="#">관리자</a> /
            <span>회원관리</span>
        </div>
    </div>
</section>
<!-- Page top end-->

<div class="membercontroll-section">
    <div class="membercontroll-container">
        <h3 style="color: white; margin-bottom: 50px;">회원 관리</h3>
        <div class="membercontroll-search-container">
            <label for="membercontroll-category">카테고리 선택:</label>
            <select id="membercontroll-category">
                <option value="all">전체</option>
                <option value="email">이메일</option>
                <option value="nickname">닉네임</option>
            </select>
            <input type="text" id="membercontroll-search" placeholder="검색어를 입력해 주세요">
            <button id="membercontroll-search-button">검색</button>
        </div>
        <table class="membercontroll-table">
            <thead>
            <tr>
                <th>이메일</th>
                <th>닉네임</th>
                <th>회원 권한</th>
            </tr>
            </thead>
            <tbody id="member-list">
            <!-- 회원 정보는 여기에 추가됩니다. -->
            </tbody>
        </table>
        <div id="load-more-container" style="text-align: center; margin-top: 20px;">
            <button id="load-more-button" style="background: none; border: none; cursor: pointer;">
                <i class="fas fa-chevron-down" style="font-size: 24px;"></i>
            </button>
        </div>
    </div>
</div>


<!-- Footer section -->
<footer class="footer-section">
    <div class="container">
        <div class="footer-left-pic">
            <img src="/img/footer-left-pic.png" alt="">
        </div>
        <div class="footer-right-pic">
            <img src="/img/footer-right-pic.png" alt="">
        </div>
        <a href="/" class="footer-logo">
            <img src="/img/logo.png" alt="">
        </a>
        <ul class="main-menu footer-menu">
            <li><a href="/">홈</a></li>
            <li><a href="/search/lol">전적 검색</a></li>
            <li><a href="/review">게임 랭킹</a></li>
            <li><a href="/board/boardList">자유게시판</a></li>
            <li><a href="/notice">공지사항</a></li>
        </ul>
        <div class="footer-social d-flex justify-content-center">
            <a href="#"><i class="fa fa-pinterest"></i></a>
            <a href="#"><i class="fa fa-facebook"></i></a>
            <a href="#"><i class="fa fa-twitter"></i></a>
            <a href="#"><i class="fa fa-dribbble"></i></a>
            <a href="#"><i class="fa fa-behance"></i></a>
        </div>
        <div class="copyright"><a href="">Colorlib</a> 2018 @ All rights reserved</div>
    </div>
</footer>
<!-- Footer section end -->

<!--====== Javascripts & Jquery ======-->
<script src="/js/jquery-3.2.1.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.slicknav.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/jquery.sticky-sidebar.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/main.js"></script>
<script>
    let currentPage = 0;
    const pageSize = 30;

    document.addEventListener('DOMContentLoaded', function() {
        loadMembers();

        document.getElementById('load-more-button').addEventListener('click', function() {
            loadMembers();
        });
    });

    function loadMembers() {
        currentPage++;
        fetch(`/member/members/page?page=${currentPage}&size=${pageSize}`)
            .then(response => response.json())
            .then(data => {
                const members = data.content;
                const memberList = document.getElementById('member-list');
                members.forEach(member => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${member.memberEmail}</td>
                        <td>${member.nickname}</td>
                        <td>${member.role}</td>
                    `;
                    memberList.appendChild(row);
                });

                if (data.last) {
                    document.getElementById('load-more-container').style.display = 'none';
                } else {
                    document.getElementById('load-more-container').style.display = 'block';
                }
            })
            .catch(error => console.error('Error:', error));
    }
</script>
</body>
</html>
